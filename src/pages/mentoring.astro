---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout pageTitle="Mentoring">
  <h1>Mentoring and 1:1 Coaching</h1>
  <h2>Get the expert support you need to achieve your goals.</h2>
  <p>
    I work with developers like you to pair program, video chat and give help,
    support and encouragement.
  </p>
  <p>My areas of expertise are:</p>
  <ul>
    <li>JavaScript</li>
    <li>Node</li>
    <li>React</li>
    <li>Next.js</li>
    <li>Vue</li>
    <li>
      WordPress
      <ul>
        <li>Theme and plugin development</li>
        <li>Headless WordPress</li>
      </ul>
    </li>
    <li>Working with clients</li>
    <li>Career transition</li>
    <li>Learning and curriculum design</li>
  </ul>

  <div class="enquiry-form">
    <h2>Get in Touch</h2>
    <p>
      Ready to accelerate your development journey? Let's discuss how I can help
      you achieve your goals.
    </p>
    <form class="contact-form" id="mentoring-form" name="mentoring" method="POST" data-netlify="true" data-netlify-honeypot="bot-field">
      <!-- Hidden honeypot field to prevent spam -->
      <input type="hidden" name="bot-field" />
      <input type="hidden" name="form-name" value="mentoring" />
      
      <div class="form-group">
        <label for="name">Name*</label>
        <input type="text" id="name" name="name" required />
      </div>

      <div class="form-group">
        <label for="email">Email*</label>
        <input type="email" id="email" name="email" required />
      </div>

      <div class="form-group">
        <label for="company">Company/Organization</label>
        <input type="text" id="company" name="company" />
      </div>

      <div class="form-group">
        <label for="focus-area">Primary Area of Interest*</label>
        <select id="focus-area" name="focus-area" required>
          <option value="">Choose an area...</option>
          <option value="javascript">JavaScript</option>
          <option value="react">React</option>
          <option value="nodejs">Node.js</option>
          <option value="vue">Vue.js</option>
          <option value="nextjs">Next.js</option>
          <option value="wordpress">WordPress Development</option>
          <option value="career">Career Transition</option>
          <option value="team-training">Team Training</option>
          <option value="other">Other</option>
        </select>
      </div>

      <div class="form-group">
        <label for="experience">Current Experience Level</label>
        <select id="experience" name="experience">
          <option value="">Select level...</option>
          <option value="beginner">Beginner (0-1 years)</option>
          <option value="intermediate">Intermediate (1-3 years)</option>
          <option value="experienced">Experienced (3-5 years)</option>
          <option value="senior">Senior (5+ years)</option>
        </select>
      </div>

      <div class="form-group">
        <label for="goals"
          >What are your goals? What challenges are you facing?*</label
        >
        <textarea
          id="goals"
          name="goals"
          rows="4"
          required
          placeholder="Tell me about what you'd like to achieve and any specific challenges you're working through..."
        ></textarea>
      </div>

      <div class="form-group">
        <label for="timeline">Preferred Timeline</label>
        <select id="timeline" name="timeline">
          <option value="">Select timeline...</option>
          <option value="asap">As soon as possible</option>
          <option value="1-2weeks">Within 1-2 weeks</option>
          <option value="1month">Within a month</option>
          <option value="flexible">Flexible</option>
        </select>
      </div>

      <button type="submit" class="submit-btn">Send Enquiry</button>
    </form>

    <div id="form-message" class="form-message hidden"></div>
  </div>
</BaseLayout>

<style>
  .enquiry-form {
    margin: 3rem 0 2rem 0;
    padding: 2rem;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e9ecef;
  }

  .enquiry-form h2 {
    color: var(--site-green);
    margin-bottom: 1rem;
    font-size: 1.8rem;
  }

  .enquiry-form p {
    margin-bottom: 2rem;
    color: #666;
    font-size: 1.1rem;
    line-height: 1.6;
  }

  .contact-form {
    max-width: 600px;
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: #333;
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
    background: white;
    transition: border-color 0.2s ease;
  }

  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--site-green);
    box-shadow: 0 0 0 2px rgba(0, 105, 46, 0.1);
  }

  .form-group textarea {
    resize: vertical;
    min-height: 100px;
    font-family: inherit;
  }

  .submit-btn {
    background: var(--site-green);
    color: white;
    padding: 0.875rem 2rem;
    border: none;
    border-radius: 4px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition:
      background-color 0.2s ease,
      transform 0.1s ease;
  }

  .submit-btn:hover {
    background: #005a28;
    transform: translateY(-1px);
  }

  .submit-btn:active {
    transform: translateY(0);
  }

  .form-message {
    margin-top: 1rem;
    padding: 1rem;
    border-radius: 4px;
    font-weight: 500;
  }

  .form-message.success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
  }

  .form-message.error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
  }

  .hidden {
    display: none;
  }

  .loading {
    opacity: 0.7;
    pointer-events: none;
  }

  @media (max-width: 768px) {
    .enquiry-form {
      margin: 2rem 0;
      padding: 1.5rem;
    }

    .enquiry-form h2 {
      font-size: 1.5rem;
    }
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("mentoring-form") as HTMLFormElement;
    const messageDiv = document.getElementById(
      "form-message",
    ) as HTMLDivElement;

    // Function to encode form data for Netlify
    const encode = (data: Record<string, any>) => {
      return Object.keys(data)
        .map(key => encodeURIComponent(key) + "=" + encodeURIComponent(data[key]))
        .join("&");
    };

    form?.addEventListener("submit", async (e) => {
      e.preventDefault();

      // Show loading state
      form.classList.add("loading");
      messageDiv.className = "form-message hidden";

      // Collect form data
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      try {
        // Submit to Netlify Forms
        const response = await fetch("/", {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: encode({
            "form-name": "mentoring",
            ...data
          })
        });

        if (response.ok) {
          // Show success message
          messageDiv.className = "form-message success";
          messageDiv.innerHTML = `
            <h3>Thank you for your enquiry!</h3>
            <p>I'll get back to you within 24 hours to discuss your goals and how I can help.</p>
          `;

          // Reset form
          form.reset();
        } else {
          throw new Error('Form submission failed');
        }
      } catch (error) {
        // Show error message
        messageDiv.className = "form-message error";
        messageDiv.innerHTML = `
          <h3>Oops! Something went wrong.</h3>
          <p>Please try again or email me directly at enquires@kevincunningham.co.uk</p>
        `;
        console.error("Form submission error:", error);
      } finally {
        form.classList.remove("loading");
      }
    });
  });
</script>
