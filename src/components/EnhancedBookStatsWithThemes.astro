---
import type { EnhancedBookStats } from "../utils/bookStats";
import type { BookWithEnhancedData } from "../types/books";

export interface Props {
	stats: EnhancedBookStats;
	books?: BookWithEnhancedData[];
}

const { stats } = Astro.props;

// Helper function to format numbers
function formatNumber(num: number): string {
	return num.toLocaleString();
}
---

<div class="enhanced-book-stat">
	<!-- Basic Statistics -->
	<section class="stats-section">
		<h2 class="section-title">ðŸ“Š Reading Overview</h2>
		<div class="stats-grid">
			<div class="stat-card">
				<h3 class="stat-title">Total Books</h3>
				<p class="stat-number">{formatNumber(stats.totalBooks)}</p>
			</div>
			<div class="stat-card">
				<h3 class="stat-title">Total Pages</h3>
				<p class="stat-number">{formatNumber(stats.totalPages)}</p>
			</div>
			<div class="stat-card">
				<h3 class="stat-title">Average Pages</h3>
				<p class="stat-number">{formatNumber(stats.averagePagesPerBook)}</p>
			</div>
			<div class="stat-card">
				<h3 class="stat-title">Books This Year</h3>
				<p class="stat-number">{formatNumber(stats.booksThisYear)}</p>
			</div>
		</div>
	</section>
</div>

<style>
	.enhanced-book-stat {
		@apply space-y-8 mb-8;
		animation: fadeInUp 0.6s ease-out;
	}

	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.stats-section {
		@apply bg-white rounded-lg shadow-sm border border-gray-200 p-6;
	}

	.section-title {
		@apply text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2;
	}

	.stats-grid {
		@apply grid grid-cols-2 md:grid-cols-4 gap-4;
	}

	.stat-card {
		@apply bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 text-center border border-blue-200;
	}

	.stat-title {
		@apply text-sm font-medium text-blue-700 mb-2;
	}

	.stat-number {
		@apply text-2xl font-bold text-blue-900;
	}

	/* Responsive design */
	@media (max-width: 768px) {
		.stats-grid {
			@apply grid-cols-2;
		}
	}
</style>
